apiVersion: external-secrets.io/v1
kind: SecretStore
metadata:
  name: infisical-secret-store
  namespace: infisticaleso
spec:
  provider:
    infisical:
      hostAPI: https://eu.infisical.com
      auth:
        universalAuthCredentials:
          clientId:
            key: clientId
            namespace: infisticaleso
            name: infistical-auth-credentials
          clientSecret:
            key: clientSecret
            namespace: infisticaleso
            name: infistical-auth-credentials
      secretsScope:
        projectSlug: kubernetes-3-v-pr
        # "dev", "staging", "prod", etc.
        environmentSlug: prod
        # Optional (default: `/`).
        #
        # Secrets will only be retrieved from this path for `data` and `dataFrom` rules. When a
        # `data` `remoteRef` uses a path (e.g. `/foo/bar`), that reference will use an absolute
        # reference and disregard this default.
        #
        # If you need to prevent access to secrets outside of this path, rely on instead setting
        # Access Controls in Infisical.
        secretsPath: /
        # Optional (default: false).
        #
        # When recursive is enabled, secrets retrieved using `dataFrom` patterns will fetch all secrets recursive.
        recursive: false
        # optional
        expandSecretReferences: false # Default is true
